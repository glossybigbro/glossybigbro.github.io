/**
 * Global Styles - Main CSS Entry Point
 * 
 * 이 파일은 애플리케이션의 메인 CSS 진입점입니다.
 * Tailwind CSS v4와 모든 커스텀 CSS 모듈을 임포트합니다.
 * 
 * 구조:
 * 1. Tailwind CSS 임포트 (반드시 첫 번째)
 * 2. 모듈형 CSS 임포트 (base → themes → components → utilities 순서)
 * 3. @theme 블록 (Tailwind v4 색상 변수 정의)
 * 4. @layer base (기본 스타일 및 테마 변수)
 * 5. @layer utilities (유틸리티 클래스)
 * 
 * 중요: Tailwind v4 호환성을 위해 임포트 순서를 변경하지 마세요.
 */

/* ============================================
   Tailwind CSS 임포트
   ============================================ */
@import "tailwindcss";

/* ============================================
   모듈형 CSS 임포트
   순서: base → themes → components → utilities
   ============================================ */

/* Base: 색상 팔레트 변수 */
@import "../styles/base/variables.css";

/* Themes: 4-Way 테마 시스템 (Chrome + Website) */
@import "../styles/themes/four-way.css";

/* Components: 재사용 가능한 컴포넌트 스타일 */
@import "../styles/components/badges.css";
@import "../styles/components/dividers.css";
@import "../styles/components/metrics.css";

/* Utilities: 유틸리티 클래스 (호버, 트랜지션 등) */
@import "../styles/utilities/hover.css";
@import "../styles/utilities/transitions.css";


/* ============================================
   Tailwind v4 테마 설정
   ============================================ */

/**
 * @theme 블록
 * 
 * Tailwind CSS v4의 색상 시스템을 정의합니다.
 * HSL 변수를 Tailwind 색상 클래스로 매핑합니다.
 * 
 * 예: bg-background, text-foreground, border-border 등
 */
@theme inline {
  /* 기본 색상 (HSL 변수 기반) */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  /* Border Radius 스케일 */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* 폰트 패밀리 */
  --font-sans: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
}

/* ============================================
   Base Layer - 테마 변수 및 기본 스타일
   ============================================ */

/**
 * :root - Light Mode 테마 변수
 * 
 * HSL 형식으로 색상을 정의합니다.
 * 형식: hue saturation% lightness%
 * 
 * 사용 예: background-color: hsl(var(--background));
 */
@layer base {
  :root {
    /* 기본 배경 및 텍스트 색상 */
    --background: 0 0% 100%;
    /* 흰색 배경 */
    --foreground: 222.2 84% 4.9%;
    /* 거의 검은색 텍스트 */

    /* 카드 컴포넌트 색상 */
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    /* 팝오버 색상 */
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    /* 주요 색상 (Primary) */
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    /* 보조 색상 (Secondary) */
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    /* 음소거 색상 (Muted) - 덜 강조되는 요소 */
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    /* 강조 색상 (Accent) */
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    /* 경고/삭제 색상 (Destructive) */
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    /* 테두리 및 입력 필드 색상 */
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    /* Border Radius */
    --radius: 0.5rem;

    /* 호버 효과 색상 (헤더 아이콘 등) */
    --hover-bg: #323236;
    /* 어두운 회색 배경 */
    --hover-fg: #EEEEEE;
    /* 밝은 회색 텍스트 */

    /* Z-index 스케일 - 레이어 순서 관리 */
    --z-header: 50;
    /* 헤더 레이어 */
    --z-toast: 100;
    /* 토스트 알림 레이어 */
    --z-transition-old: 1;
    /* View Transition 이전 상태 */
    --z-transition-new: 9999;
    /* View Transition 새 상태 */
  }

  /**
   * .dark - Dark Mode 테마 변수
   * 
   * 사용자가 다크 모드를 선택했을 때 적용됩니다.
   * next-themes 라이브러리가 .dark 클래스를 토글합니다.
   */
  .dark {
    /* 기본 배경 및 텍스트 색상 */
    --background: 220 6% 13%;
    /* 어두운 배경 */
    --foreground: 0 0% 95%;
    /* 밝은 텍스트 */

    /* 카드 컴포넌트 색상 */
    --card: 0 0% 8%;
    --card-foreground: 0 0% 95%;

    /* 팝오버 색상 */
    --popover: 220 6% 13%;
    --popover-foreground: 0 0% 95%;

    /* 주요 색상 (Primary) */
    --primary: 0 0% 95%;
    --primary-foreground: 0 0% 10%;

    /* 보조 색상 (Secondary) */
    --secondary: 0 0% 12%;
    --secondary-foreground: 0 0% 95%;

    /* 음소거 색상 (Muted) */
    --muted: 0 0% 12%;
    --muted-foreground: 0 0% 65%;

    /* 강조 색상 (Accent) */
    --accent: 0 0% 12%;
    --accent-foreground: 0 0% 95%;

    /* 경고/삭제 색상 (Destructive) */
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 95%;

    /* 테두리 및 입력 필드 색상 */
    --border: 0 0% 18%;
    --input: 0 0% 18%;
    --ring: 0 0% 80%;
  }
}

/* ============================================
   기본 요소 스타일
   ============================================ */
@layer base {

  /* 모든 요소에 border-border 색상 적용 */
  * {
    @apply border-border;
  }

  /* body 요소 기본 스타일 */
  body {
    @apply bg-background text-foreground;
  }

  /* View Transition이 없을 때만 부드러운 전환 적용 */
  body:not(.view-transitioning) {
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  /* ============================================
     모바일 터치 최적화
     ============================================ */

  /* 모바일 탭 하이라이트 제거 (터치 시 파란색 배경 제거) */
  button,
  a {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0) !important;
  }

  /* 버튼 포커스 상태 제거 (접근성보다 디자인 우선) */
  button:focus,
  button:focus-visible,
  button:active {
    outline: none;
    box-shadow: none;
  }

  /* 링크 포커스 상태 제거 */
  a:focus,
  a:focus-visible,
  a:active {
    outline: none;
    box-shadow: none;
  }

  /* ============================================
     View Transition API 설정
     ============================================ */

  /* View Transition 기본 애니메이션 제거 (커스텀 애니메이션 사용) */
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation: none;
    mix-blend-mode: normal;
  }

  /* 새로운 테마가 항상 위에 표시되도록 z-index 설정 */
  ::view-transition-new(root) {
    z-index: var(--z-transition-new);
  }

  /* 이전 테마는 아래에 표시 */
  ::view-transition-old(root) {
    z-index: var(--z-transition-old);
  }
}

/* ============================================
   유틸리티 클래스
   ============================================ */
@layer utilities {

  /* 강조 텍스트 스타일 (굵게 + 이탤릭) */
  .emphasis {
    @apply font-bold italic;
  }
}